function click_to_call_action(e,t){if("verify"==t){if(_gaq.push(["_trackEvent","ClickToCall","Verify-code","drama-salon-spa-ghatkopar-west"]),$("#ctc_code").length){var a=$("#ctc_code").val();if(dt+="&code="+a+"&dowhat="+t,$("#click_to_call").modal("show"),isNaN(a)||""==a)return alert("The entered code does not match"),!1}click_to_call(e)}else if("storemobile"==t){if(_gaq.push(["_trackEvent","ClickToCall","Store-Mobile","drama-salon-spa-ghatkopar-west"]),$("#ctc_phone").length){var i=$("#ctc_phone").val();if(dt+="&phone="+i+"&dowhat="+t,$("#click_to_call").modal("show"),isNaN(i)||""==i||10!=i.length)return alert("Please enter a valid phone number"),!1}click_to_call(e)}else"connectcall"==t&&$.get("/service/connectcall/"+e,"",function(){})}function click_to_call(e){dt+="&location_id="+e,$("#click_to_call").modal("show"),$.post("/service/click_to_call",dt,function(e){"no"==e?$("#ctc_unmatch").show():($("#click_to_call_content").html(e),$("#ctc_unmatch").hide(),$("#click_to_call_text").hide(),"1"==$("#ctc_connect_allow").val()&&_gaq.push(["_trackPageview","http://purplle.com/finder/mumbai/venue/drama-salon-spa-ghatkopar-west/clicktocall"]))})}function share(e,t,a,i,n,l){if(void 0!=n&&n.length>0&&"f"==e)return fb_init(),void share_sp(e,t,a,i,n,l);t.length>0||(t=window.location.hostname,t+=window.location.pathname),!t.indexOf("http://www.")>=0&&(0==t.indexOf("http://")&&(t=t.slice(7)),0==t.indexOf("www.")&&(t=t.slice(4)),t="http://www."+t),url1=t,code1=a;var r="?";t.indexOf("?")>0&&(r="&"),t=encodeURIComponent(t),void 0!=a&&a.length>0&&(a=encodeURIComponent(r+"a="+a)),void 0!=i&&i.length>0&&(i=encodeURIComponent(i)),void 0!=n&&n.length>0&&(n=encodeURIComponent(n));var o,s;switch(e){case"f":o="https://www.facebook.com/sharer/sharer.php?u=",s=o+t,a.length>0&&(s+=a);break;case"g":o="https://plus.google.com/share?url=",s=o+t,a.length>0&&(s+=a);break;case"t":o="https://www.twitter.com/intent/tweet?url=",s=o+t,a.length>0&&(s+=a),i.length>0&&(s+="&text="+i),s+="&via=letspurplle";break;case"p":o="http://pinterest.com/pin/create/button?url=",s=o+t,a.length>0&&(s+=a),i.length>0&&(s+="&description="+i),n.length>0&&(s+="&media="+n)}$.ajax({url:"/searchnew/log_visit",type:"GET",data:{share_id:code1,page:url1}}),window.open(s)}function send_impression(e){var t=$("#empty_form").serialize();t=t+"&banner_ids="+e,$.ajax({url:"/banners/save_impressions",type:"POST",data:t,success:function(){},error:function(){}})}function store_click(e){var t=$("#empty_form").serialize();t=t+"&banner_id="+e,$.ajax({url:"/banners/banner_click",type:"POST",data:t,success:function(){},error:function(){}})}function setstaronly(e,t){$('input:radio[name="rating_'+t+'"][value="'+e+'"]').click(),$.ajax({type:"POST",url:"/reviews/submit_nonuser_rating",cache:!1,data:$("#empty_form").serialize()+"&module=location&module_id="+t+"&rating="+e,success:function(){$.ajax({type:"POST",url:"/reviews/service_rating_refresh/"+t,cache:!1,success:function(e){var t=e.split("|");$("#salon_rating_num").html(t[1]),$("#salon_rating").html('<span class="rating-static rating-'+t[0]+'"></span>'),$("#salon_rating").html(t[2])}})}})}function showverifyform(e){$("#verifyform_modal").modal("show");var t="module=location&module_id="+e;$.ajax({type:"GET",url:"/service/service/getverifyform/",data:t,success:function(e){document.getElementById("verifyform_div").innerHTML=e}})}function hideverifyform(){$("#verifyform_modal").modal("hide")}function hidevouchers(){document.getElementById("vouchers_overlay").style.display="none",document.getElementById("vouchers_div").style.display="none"}function verifyvouchercode(e){var t=$("#verf_form").serialize();if("verify"==e){var a=document.getElementById("voucher_code").value,i="";"verify"==e?i=document.getElementById("pin").value:e="confirm",t=t+"&action="+e+"&booking_code="+a+"&pin="+i}else t=t+"&action="+e+"&app_id="+$("#appointment_id_val").val();var n="Verifying....";$("#voucher_verify").html(n),$.ajax({type:"POST",url:"/booking/verifybooking",data:t,cache:!1,success:function(e){"invalidbook"==e?($("#voucher_invalid").html("Invalid Booking Code"),$("#voucher_invalid").show()):"invalidpin"==e?($("#voucher_invalid").html("Invalid Venue Pin"),$("#voucher_invalid").show()):"status"==e?($("#voucher_invalid").html("This Booking Code is Cancelled Or Already Redemeed"),$("#voucher_invalid").show()):"done"==e?(alert("Booking Marked As Complete"),$("#verifyform_modal").modal("hide")):document.getElementById("verifyform_div").innerHTML=e}})}function hideleadform(){document.getElementById("leadform_overlay").style.display="none",document.getElementById("leadform_div").style.display="none"}function savecontactlead(){var e=$("#reg_form").serialize();$.ajax({type:"POST",url:"/service/util/savelead/chain/",data:e,success:function(e){hideleadform(),alert(e),$("#leadform_chat").modal("hide")}})}function savecontactnumberrequest(e,t,a){var n=document.getElementsByName("display_number_"+t),l=document.getElementsByName("show_display_number_"+t);for(i=0;i<n.length;i++)n[i].style.display="block";for(i=0;i<l.length;i++)l[i].style.display="none";$.ajax({type:"GET",url:"/service/util/savecontactnumberrequest",data:"module="+e+"&module_id="+t+"&source="+a,cache:!1,success:function(){}})}function fshare_this(e,t,a){jQuery(window).ready(function(){var i="https://www.facebook.com/dialog/feed?appid=298617716861935&caption="+encodeURI(t)+"&link="+encodeURI(t)+"&picture="+encodeURI(a);window.open(i,"facebook","screenX=100,screenY=100,height=580,width=730"),e.preventDefault(),e.stopPropagation()})}function empty(e){return""==document.getElementById(e).value?!1:!0}function checkpassword(e,t){var a=document.getElementById(e).value,i=document.getElementById(t).value;return a==i?!0:!1}function validateEmail(e){var t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return t.test(e)}function validatereg(e,t,a){return empty(e)?empty(t)&&empty(a)?validateEmail(document.getElementById(e).value)?checkpassword(t,a)?(popupregister(),!0):(alert("Passwords do not match!"),document.getElementById(t).value="",document.getElementById(a).value="",document.getElementById(t).focus(),!1):(alert("invalid Email entered"),document.getElementById(e).focus(),!1):(alert("Field can not be blank"),document.getElementById(t).value="",document.getElementById(a).value="",document.getElementById(t).focus(),!1):(alert("Email can not be blank"),document.getElementById(t).value="",document.getElementById(a).value="",document.getElementById(e).focus(),!1)}function getUrlVars(){for(var e,t=[],a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<a.length;i++)e=a[i].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function set_data(){$("#btf_filter > li").each(function(){var e=$(this).data("searchid"),t=$(this).data("name"),a={id:e,name:t};btf_items.push(a)}),$("#bf_filter > li").each(function(){var e=$(this).data("searchid"),t=$(this).data("name"),a={id:e,name:t};bf_items.push(a)}),$("#sf_filter > strong >  li").each(function(){var e=$(this).data("searchid"),t=$(this).data("name"),a=$(this).data("parentid"),i={id:e,name:t,parentid:a};sf_items.push(i)}),$("#af_filter > strong > li").each(function(){var e=$(this).data("searchid"),t=$(this).data("name"),a=$(this).data("parentid"),i={id:e,name:t,parentid:a};af_items.push(i)})}function search_item(e){var t=$("."+e).val();if("btf"==e)var a=fuse_btf;else if("bf"==e)var a=fuse_bf;else if("af"==e)var a=fuse_af;else var a=fuse_sf;if(0==t.length&&("af"==e||"sf"==e?$("#"+e+"_filter > strong > li").each(function(){var t=$(this).data("searchid"),a=$(this).data("parentid");$("#"+e+"_"+t).show(),$(".zone_"+a).show(),$(".check_all").show()}):$("#"+e+"_filter > li").each(function(){var t=$(this).data("searchid"),a=$(this).data("parentid");$("#"+e+"_"+t).show(),$(".zone_"+a).show()}),$("#no-results-"+e).hide()),t.length>=1){"af"==e||"sf"==e?$("#"+e+"_filter > strong > li").each(function(){var t=$(this).data("searchid"),a=$(this).data("parentid");$("#"+e+"_"+t).hide(),$(".zone_"+a).hide(),$(".check_all").hide()}):$("#"+e+"_filter > li").each(function(){var t=$(this).data("searchid"),a=$(this).data("parentid");$("#"+e+"_"+t).hide(),$(".zone_"+a).hide()});var n=a.search(t);for(i=0;i<n.length;i++)$(".zone_"+n[i].parentid).show(),$("#"+e+"_"+n[i].id).show();n.length>0?$("#no-results-"+e).hide():$("#no-results-"+e).show()}}var totalPages="undefined"!=typeof totalPages?totalPages:0,filterString="undefined"!=typeof filterString?filterString:0,CitySlug="undefined"!=typeof CitySlug?CitySlug:0,Type="undefined"!=typeof Type?Type:0,TypeSlug="undefined"!=typeof TypeSlug?TypeSlug:0,purplle={init:function(){$("input.search").keyup(function(){var e=$(this).val();return""==e?($("#autocomplete_suggest").hide(),!1):e.length<2?($("#autocomplete_suggest").hide(),!1):void suggest(e,$("#searchcityid").val(),"all","desktop")})},suggest:function(e,t,a,i){if(!e)return!1;xhr&&(xhr.abort(),xhr=null);var n=$.ajax({url:"/service/util/suggest/"+t+"/"+a,type:"get",data:{q:e}});xhr=n,n.done(function(e){xhr=null,fillautocomplete(i,e),$("#autocomplete_suggest").show()})},fillautocomplete:function(e,t){resp=$.parseJSON(t);var a="";if("mobile"==e)for(i=0;i<resp.length;i++){var n="p-pin-alt",l="a";"chain"==resp[i].type&&(n="p-link",l="c"),"service"==resp[i].type&&(n="p-scissors",l="s"),"venue"==resp[i].type&&(n="p-angle-right",l="v");var r=resp[i].name;resp[i].cityslug||(resp[i].cityslug=$("#searchcityslug").val());var o="/bookings/"+resp[i].cityslug+"/"+resp[i].slug+"-"+l;a+='<a class="tdn" href="'+o+'"><div class="pp-g nbbb pdt10 pdb10"><div class="w14"><i class="'+n+' x1 tx-grey t-left pdl10"></i></div><div class="pp-c-10-12 f13 t-left"><span><strong class="tx-b prt3">'+r+"</strong></span></div></div></a>"}else if("desktop"==e){for(a+='<ul class="list-group">',i=0;i<resp.length;i++){var n="fa-map-marker",r=resp[i].name,l="a";"chain"==resp[i].type&&(n="fa-institution",l="c"),"service"==resp[i].type&&(n="fa-tag",l="s"),"venue"==resp[i].type&&(n="chevron-right",l="v");var s=resp[i].cityslug.toProperCase(),o="/bookings/"+resp[i].cityslug+"/"+resp[i].slug+"-"+l;a+='<li class="list-group-item"><i class="fa '+n+'" style="margin-right:10px;"></i> <a href="'+o+'">'+r+"</a></li>"}a+="</ul>"}else if("mobile-nearby"==e){var n="p-pin-alt";for(i=0;i<resp.length;i++){var r=resp[i].name,s=resp[i].cityslug.toProperCase(),o="/bookings/"+resp[i].cityslug+"/"+resp[i].type+"/"+resp[i].slug;a+='<a class="search_result" style="" href="'+o+'"><div class="pp-g nbbb pdt15 pdb15"><div class="w14"><i class="'+n+' x1-5 tx-grey"></i></div><div class="pp-c-10-12 f13"><span><strong class="tx-b">'+r+'</strong></span><div class="clear"></div><span class="tx-grey prt3">'+s+"</span></div></div></a>"}}$("#autocomplete_suggest").html(a)}},purplleListing={track_load:0,autoLoadPageCount:2,loading:!1,page:1,finderUrlPrefix:"/bookings",ajaxVenueURL:"",currentFilter:"",tempFilterString:"",init:function(e){purplleListing.ajaxVenueURL="search"==window.Type?"/listing/filter/searchajax/":"/bookings/filter/ajax",purplleListing.tempFilterString=window.filterString,$.getJSON("/bookings/filters/"+CitySlug+"/"+Type+"/"+TypeSlug+"/"+(window.filterString?"?custom="+encodeURIComponent(window.filterString):""),function(e){purplleListing.populateFilter(e),purplleListing.tempFilterString&&($("#no-more").addClass("dn"),$("#load-more").show(),purplleListing.prefillCheckbox(purplleListing.QueryStringToObj(purplleListing.tempFilterString),"input:checkbox.searchFields"),purplleListing.tempFilterString=null)}),filterString&&"search"!=Type&&(this.createIteamList(this.ajaxVenueURL+"/"+CitySlug+"/?custom="+encodeURIComponent(filterString),"clear"),purplleListing.track_load=0),"search"==window.Type&&$("#sort_by_filter,#range_filter,#offer_filter").hide(),e||($('input:checkbox[name="sorting"]').on("change",function(){var e=$(this).prop("name"),t=$('input[name="sorting"]:checked').length;0==t&&$(this).prop("checked",!0),$(this).is(":checked")&&($(':checkbox[name="'+e+'"]').not($(this)).prop("checked",!1),"distance"!=$(this).val()?($('input:checkbox[name="sort"]').prop("checked",!1),$('input:checkbox[name="nearby"]').prop("checked",!1)):$('input:checkbox[name="nearby"]').prop("checked",!0),purplleListing.removetag(e,""))}),$("body").off().on("change",".searchFields",function(){$("html, body").animate({scrollTop:0},500),purplleListing.updateSearchResult(),this.checked?"cost"==$(this).attr("name")||purplleListing.addtag($(this).attr("name"),$(this).attr("value"),$(this).attr("data-field-name")):purplleListing.removetag($(this).attr("name"),$(this).attr("value")),purplleListing.currentFilter=$(this).attr("name");var e=$("input[name='"+purplleListing.currentFilter+"']:checked").length;e>0?$("#clear-all[data-field-type='"+purplleListing.currentFilter+"']").removeClass("dn"):$("#clear-all[data-field-type='"+purplleListing.currentFilter+"']").addClass("dn"),$("input[name='sf']:checked").length>0?purplleListing.showPriceFilter():purplleListing.hidePriceFilter()}),$("body").on("click","#tag-button",function(){type=$(this).attr("data-field-type"),val=$(this).attr("data-field-value"),purplleListing.removetag(type,val),$('input[name="'+type+'"][value="'+val+'"]').trigger("click")}),$("body").on("click","#clear-all",function(){type=$(this).attr("data-field-type"),purplleListing.removetag(type,!1);var e=$('.searchFields[name="'+type+'"]:checked'),t=e.length;e.each(function(e){return e==t-1?($(this).trigger("click"),!0):void $(this).prop("checked",!1)})}),$(document).on("click",".vloader",function(e){e.preventDefault()}),$(window).on("popstate",function(){popstate="yes",filterString=decodeURIComponent(getUrlVars().custom),filterString&&"undefined"!=filterString&&"undefined"!=typeof filterString||(filterString=decodeURIComponent(Type2+":"+TypeSlug2)),$(".box-clear:not(#sorting_filter)").find("li").remove(),$("div#tag-box").find("button").remove(),$("div#all-tag-box").find("button").remove(),$(".loader-bag").removeClass("dn"),$(".loader-bag-mob").removeClass("dn"),purplleListing.init(!0),popstate=null}),$("body").one("click",function(){set_data()}),$("#rev-data").on("click",function(e){e.preventDefault();var t=$(this).attr("data-url");window.location=t}),$("#img-data").on("click",function(e){e.preventDefault();var t=$(this).attr("data-url");window.location=t}),this.init_toggle())},mobile_init:function(){},updateSearchResult:function(){this.page=1,this.track_load=0,this.loading=!1,QueryString=this.selectedCheckbox("input:checkbox.searchFields"),$(".loader-bag").removeClass("dn"),$(".loader-bag-mob").removeClass("dn"),this.createIteamList(this.buildNextCallURL(this.page,"result",QueryString),"clear"),this.updateFilter(this.buildNextCallURL(this.page,"filters",QueryString))},init_toggle:function(){$(".fil-in").on("click",function(){var e=0;"block"==$(this).parent().find(".collapsed").css("display")&&(e=1),$(".collapsed").hide(),$(".fil-in i").removeClass("p-angle-up").addClass("p-angle-down"),0==e&&($(this).parent().find(".collapsed").show(),$(this).find("i").removeClass("p-angle-down").addClass("p-angle-up"))}),$(".fil-in").on("keyup",function(){var e=0;"block"==$(this).parent().find(".collapsed").css("display")&&(e=1),0==e&&($(this).parent().find(".collapsed").show(),$(this).find("i").removeClass("p-angle-down").addClass("p-angle-up"))})},buildNextCallURL:function(e,t,a){if("result"==t)var i=this.ajaxVenueURL+"/"+CitySlug+"/"+e+"?custom="+a;else if("filters"==t)var i="/bookings/filters/"+CitySlug+"/"+Type+"/"+TypeSlug+"?custom="+a;return"search"==window.Type&&(i+="&q="+window.TypeSlug),i},nextCall:function(){this.page=this.page+1,QueryString=this.selectedCheckbox("input:checkbox.searchFields"),url=this.buildNextCallURL(this.page,"result",QueryString),this.createIteamList(url)},createIteamList:function(e,t){if($("#load-more").addClass("vloader"),$("#no-more").addClass("dn"),"undefined"==typeof t&&(t="no"),1!=this.loading){this.loading=!0,currentpage=this.page;var a=0;$.ajax({type:"GET",url:e,data:"",dataType:"json",success:function(e){var i=$("#list-item").html();"clear"==t&&purplleListing.startLoadingOnListing("#searchResults","clear"),purplleListing.track_load++,$.each(e,function(e,t){if("count"==e)return $("#list-item-count").html(t),!0;if("pages"==e)return totalPages=t,$("#list-item-page-count").html(t),!0;if($(i).appendTo("#searchResults").addClass("item_"+t.id),itemHTML=$(".item_"+t.id),"656"==t.chain_id&&itemHTML.addClass("purpllesalon"),itemHTML.find("#item-url").attr("href",purplleListing.finderUrlPrefix+"/"+CitySlug+"/"+t.slug+"-v"),itemHTML.find("#item-name").html(t.name),itemHTML.find("#item-class").html(t.class),itemHTML.find("#item-type").html(t.type_name),itemHTML.find("#item-area").html(t.landmark?t.landmark+", "+t.area_name:t.area_name),avg_rating=t.user_rating&&t.user_rating.avg_rating?t.user_rating.avg_rating:"0.0",2>avg_rating?itemHTML.find("#item-rating-border").addClass("bc-pk10 tx-pk10"):3>avg_rating?itemHTML.find("#item-rating-border").addClass("bc-pk30 tx-pk30").removeClass("bc-pk10 tx-pk10"):4>avg_rating?itemHTML.find("#item-rating-border").addClass("bc-pk50 tx-pk50").removeClass("bc-pk10 tx-pk10"):5>avg_rating?itemHTML.find("#item-rating-border").addClass("bc-pp70 tx-pp70").removeClass("bc-pk10 tx-pk10"):5==avg_rating&&itemHTML.find("#item-rating-border").addClass("bc-pp tx-pp").removeClass("bc-pk10 tx-pk10"),itemHTML.find("#item-rating").html(avg_rating),rating=t.user_rating&&t.user_rating.ratings?t.user_rating.ratings>1?t.user_rating.ratings+" Ratings":t.user_rating.ratings+" Rating":"0 Rating",itemHTML.find("#item-rate").html(rating),rating_count=t.user_reviews&&t.user_reviews.count?t.user_reviews.count:0,itemHTML.find("#item-reviews").html(rating_count),rating_count>1?itemHTML.find("#rev-data").attr("data-hint",rating_count+" Reviews"):itemHTML.find("#rev-data").attr("data-hint",rating_count+" Review"),t.distance){var n="<div id='dist' class='pull-right mrr2'><i class='p-pin-drop x1'></i><span class='f-right mrl3 fpr f12' id='item-reviews'>"+t.distance+" Km</span></div>",l="<li><i class='p-pin-drop'></i><span>"+t.distance+" Km &nbsp;</span></li>";itemHTML.find("#detail").append(n),itemHTML.find("#distc").append(l)}if("Unisex"==t.gender)var r="<i class='p-venus-mars x1-5 pull-right'></i>";else if("Gents"==t.gender)var r="<i class='p-mars x1-5 pull-right'></i>";else var r="<i class='p-venus x1-5 pull-right'></i>";itemHTML.find(".gend").html(r),gallery_count=t.gallery_count||0,itemHTML.find("#item-gallery").html(gallery_count),gallery_count>1?itemHTML.find("#img-data").attr("data-hint",gallery_count+" Images"):0==gallery_count?itemHTML.find("#img-data").attr("data-hint","No Image"):itemHTML.find("#img-data").attr("data-hint",gallery_count+" Image");var o=t.offers_detail||0;itemHTML.find("#item-offer-box").hide(),"undefined"!=typeof o.offers||null!=o.offers?(itemHTML.find("#item-offer").html(o.offers[0].short_label),itemHTML.find("#item-offer-box").show()):(cod=o.cod_discount?o.cod_discount:0,online=o.online_discount?o.online_discount:0,online_discount=cod>online?cod:online,online_discount>0&&(itemHTML.find("#item-offer").html(online_discount+"% OFF"),itemHTML.find("#item-offer-box").show())),1==t.book_online&&(itemHTML.find("#item-book-box").show(),itemHTML.find("#book-online").show()),a++}),listperpage>a&&($("#no-more").removeClass("dn"),$("#load-more").hide()),purplleListing.track_load==totalPages?($("#load-more").addClass("vloader"),$("#no-more").removeClass("dn"),$("#load-more").hide()):$("#load-more").removeClass("vloader"),$(".loader-bag").addClass("dn"),$(".loader-bag-mob").addClass("dn"),purplleListing.loading=!1,window.filterString||window.history.pushState("","",purplleListing.finderUrlPrefix+"/"+CitySlug+"/"+purplleListing.getTypeShorthand(Type,TypeSlug)+"/?custom="+QueryString),window.filterString=null}})}},getTypeShorthand:function(e,t){var a;switch(e){case"service":a="s";break;case"chain":a="c";break;case"area":a="a";break;case"zone":a="z";break;case"venues":a="vs";break;case"search":return e+"/"+t;case"tag":a="vs";break;case"nearby":case"near_by":return e+"/"+t}return t+"-"+a},startLoadingOnListing:function(e,t){"clear"==t&&$(e).find("*").not(".loader-bag,.loader-bg,.loader").remove()},selectedCheckbox:function(e){var t={},a=[];return $(e).each(function(){this.checked&&(t.hasOwnProperty(this.name)||(t[this.name]=[]),arrayEle=parseFloat(this.value)?parseFloat(this.value):this.value,t[this.name].push(arrayEle))}),$.each(t,function(e,t){t.sort(function(e,t){return isNaN(e)||isNaN(t)?e>t?1:-1:e-t}),a[e]=[t.join("|")],a.sort()}),this.objToQueryString(a)},objToQueryString:function(e){for(var t=Object.keys(e),a="",i=0;i<t.length;i++)a+=t[i]+":"+e[t[i]],i!=t.length-1&&(a+=",");return encodeURIComponent(a)},QueryStringToObj:function(e){var t=[];str=e.split(",");for(var a in str){var i=str[a].split(":");for(var n in i[1])t[i[0]]=i[1].split("|")}return t},prefillCheckbox:function(e,t){var a=["more","offer","gender","class"];$.each(a,function(e,a){$(t+'[name="'+a+'"]').prop("checked",!1)}),$.each(Object.keys(e),function(a,i){$.each(e[i],function(e,a){return"cost"==i?(item=$(t+'[name="'+i+'"][data-index="'+e+'"]'),item.val(a),item.prop("checked",!0),$("#slider-range").slider("values",e,a),!0):"nearby"==i?(item=$(t+'[name="'+i+'"][data-index="'+e+'"]'),item.val(a),item.prop("checked",!0),0==e&&$('input[name="sort"]').prop("checked",!0),!0):(a.length>0&&$("#clear-all[data-field-type='"+i+"']").removeClass("dn"),item=$(t+'[name="'+i+'"][value="'+a+'"]').not(".hdn"),item.prop("checked",!0),void(item.length>0&&("cost"==i||purplleListing.addtag(i,a,item.attr("data-field-name")))))})})},addtag:function(e,t,a){html="sorting"==e?"<button type='button' class='btn sbtn pd0 pdl5 pdr5 mrb5 f11 mrr5' data-field-type='"+e+"'data-field-value='"+t+"' id='tag-button'>"+a+"</button>":"<button type='button' class='btn sbtn pd0 pdl5 pdr5 mrb5 f11 mrr5' data-field-type='"+e+"'data-field-value='"+t+"' id='tag-button'>"+a+"<i class='p-cancel prt1'></i></button>",$("#"+e).find("#tag-box").append(html),$("#all-tag-box").append(html)},removetag:function(e,t){t?($("#"+e).find("#tag-box button[data-field-value='"+t+"']").remove(),$("#all-tag-box").find("button[data-field-type='"+e+"'][data-field-value='"+t+"']").remove()):($("#"+e).find("#tag-box button").remove(),$("#all-tag-box").find("button[data-field-type='"+e+"']").remove())},clear_filters:function(e){"all"==e?($(".searchFields").not(".hdn").removeAttr("checked"),$(".all_check").removeAttr("checked"),this.updateSearchResult()):$("."+group+"_fields").removeAttr("checked"),$("#all-tag-box,#tag-box").html(" "),$(".p-cancel").addClass("dn")},updateFilter:function(e){$(".loader-bag-fil").removeClass("dn"),$.getJSON(e,function(e){$.each(e,function(e,t){if("type"==e||null===t)return!0;if(e==purplleListing.currentFilter){if(0!=$("input[name='"+e+"']:checked").length)return $.each(t,function(t,a){if(Array.isArray(a))$.each(a,function(a,i){if($("input[name='"+e+"'][value='"+i.id+"']").length)$("input[name='"+e+"'][value='"+i.id+"']").prop("disabled",!1),$("input[name='"+e+"'][value='"+i.id+"']").parent().removeClass("mute");else{var n='<li styleid="'+e+"_"+i.id+'" data-name="'+i.name+'" data-searchid="'+i.id+'"><label class="checkbox"><input type="checkbox" class="searchFields '+e+'_fields" id="'+e+'_fields" name="'+e+'" value="'+i.id+'" data-field-type="ajax" data-field-name="'+i.name+'"><span class="check"></span><span>'+i.name+"</span></label></li>";$(".zone_"+i.parent_id).length||$("#"+e+"_filter").append('<strong class="filb zone_'+i.parent_id+'">'+t+"</strong>"),$("#"+e+"_filter .zone_"+i.parent_id).append(n)}});else if("class"==e||"gender"==e)$("input[name='"+e+"'][value='"+a+"']").length&&($("input[name='"+e+"'][value='"+a+"']").prop("disabled",!1),$("input[name='"+e+"'][value='"+a+"']").parent().removeClass("mute"));else if(!$("input[name='"+e+"'][value='"+a.id+"']").length){var i='<li styleid="'+e+"_"+a.id+'" data-name="'+a.name+'" data-searchid="'+a.id+'"><label class="checkbox"><input type="checkbox" class="searchFields '+e+'_fields" id="'+e+'_fields" name="'+e+'" value="'+a.id+'" data-field-type="ajax" data-field-name="'+a.name+'"><span class="check"></span><span>'+a.name+"</span></label></li>";$("#"+e+"_filter").append(i)}}),!0;$.each($("input[name='"+e+"']"),function(e,t){$(t).prop("disabled",!1),$(t).parent().removeClass("mute")})}else $("input[name='"+e+"']").prop("disabled",!0),$("input[name='"+e+"']").parent().addClass("mute"),$.each(t,function(t,a){if(Array.isArray(a))$.each(a,function(t,a){if($("input[name='"+e+"'][value='"+a.id+"']").length)$("input[name='"+e+"'][value='"+a.id+"']").prop("disabled",!1),$("input[name='"+e+"'][value='"+a.id+"']").parent().removeClass("mute");else{var i='<li id="'+e+"_"+a.id+'" data-name="'+a.name+'" data-parentid="'+a.parent_id+'" data-searchid="'+a.id+'"><label class="checkbox" style="color:red,background-color:blue;"><input type="checkbox" class="searchFields '+e+'_fields" id="'+e+'_fields" name="'+e+'" value="'+a.id+'" data-field-type="ajax" data-field-name="'+a.name+'"><span class="check"></span><span>'+a.name+"</span></label></li>";$("#"+e+"_filter .zone_"+a.parent_id).append(i)}});else if("class"==e||"gender"==e)$("input[name='"+e+"'][value='"+a+"']").prop("disabled",!1),$("input[name='"+e+"'][value='"+a+"']").parent().removeClass("mute");else if($("input[name='"+e+"'][value='"+a.id+"']").length)$("input[name='"+e+"'][value='"+a.id+"']").prop("disabled",!1),$("input[name='"+e+"'][value='"+a.id+"']").parent().removeClass("mute");else{var i='<li styleid="'+e+"_"+a.id+'" data-name="'+a.name+'" data-searchid="'+a.id+'"><label class="checkbox"><input type="checkbox" class="searchFields '+e+'_fields" id="'+e+'_fields" name="'+e+'" value="'+a.id+'" data-field-type="ajax" data-field-name="'+a.name+'"><span class="check"></span><span>'+a.name+"</span></label></li>";$("#"+e+"_filter").append(i)}}),removeDisabled=$("input[name='"+e+"']:checked:disabled"),removeDisabled&&$.each(removeDisabled,function(t,a){$(a).prop("checked",!1),purplleListing.removetag(e,$(a).val())})}),$(".loader-bag-fil").addClass("dn")})},populateFilter:function(e){$.each(e,function(e,t){if(null===t)return!0;if("type"==e){if(Array.isArray(t))$.each(t,function(e,t){for(i in t){var a='<li><label class="checkbox"><input type="checkbox" checked class="searchFields hdn '+Object.keys(t)+'_fields" id="'+Object.keys(t)+'_fields" name="'+Object.keys(t)+'" value="'+t[i]+'" data-field-type="ajax" data-field-name="'+t[i]+'"></label></li>';$("#"+Object.keys(t)+"_filter").append(a)}});else{"sf"==Object.keys(t)[0]&&purplleListing.showPriceFilter();var a='<li><label class="checkbox"><input type="checkbox" checked class="searchFields hdn '+Object.keys(t)[0]+'_fields" id="'+Object.keys(t)[0]+'_fields" name="'+Object.keys(t)[0]+'" value="'+t[Object.keys(t)[0]]+'" data-field-type="ajax" data-field-name="'+t[Object.keys(t)[0]]+'"></label></li>';window.Type2=Object.keys(t)[0],window.TypeSlug2=t[Object.keys(t)[0]],$("#"+Object.keys(t)[0]+"_filter").append(a)}return!0}if($(".filter_box#"+e).show(),Array.isArray(t))if("class"==e||"gender"==e)$("input[name='"+e+"']").prop("disabled",!0),$("input[name='"+e+"']").parent().addClass("mute"),$.each(t,function(t,a){$("input[name='"+e+"'][value='"+a+"']").prop("disabled",!1),$("input[name='"+e+"'][value='"+a+"']").parent().removeClass("mute")});else for(var i=0;i<t.length;i++){var a='<li id="'+e+"_"+t[i].id+'" data-name="'+t[i].name+'" data-searchid="'+t[i].id+'"><label class="checkbox"><input type="checkbox" class="searchFields '+e+'_fields" id="'+e+'_fields" name="'+e+'" value="'+t[i].id+'" data-field-type="ajax" data-field-name="'+t[i].name+'"><span class="check"></span><span>'+t[i].name+"</span></label></li>";$("#"+e+"_filter").append(a)}else $.each(t,function(t,a){$(".zone_"+a[0].parent_id).length||$("#"+e+"_filter").append(' <strong class="mrl-10 zone_'+a[0].parent_id+'">'+t+' <label class="checkbox check_all"><input type="checkbox" onclick="javascript:purplleListing.selectall('+e+","+a[0].parent_id+');" class="all_check" id="select_'+a[0].parent_id+'"><span class="check"></span><span class="fpb">Select All '+t+"</span></label></strong>");for(var i=0;i<a.length;i++){var n='<li id="'+e+"_"+a[i].id+'" data-name="'+a[i].name+'" data-parentid="'+a[i].parent_id+'" data-searchid="'+a[i].id+'"><label class="checkbox"><input type="checkbox" class="searchFields '+e+'_fields" id="'+e+'_fields" name="'+e+'" value="'+a[i].id+'" data-field-type="ajax" data-parentid="'+a[i].parent_id+'" data-field-name="'+a[i].name+'"><span class="check"></span><span>'+a[i].name+"</span></label></li>";$("#"+e+"_filter .zone_"+a[0].parent_id).append(n)}})}),$(".loader-bag-fil").addClass("dn")},populateFilter_mobile:function(){},check_filter:function(){return $("input:checkbox:checked.searchFields").not(".hdn").length>0?($(".p-filter ").addClass("tx-pk"),!0):($(".p-filter ").removeClass("tx-pk"),!1)},click:function(){$("#lv").hide(),$("#fltrs").show()},goBack:function(){$("#lv").show(),$("#fltrs").hide(),this.check_filter()},selectall:function(){},getLocation:function(){if(navigator.geolocation){var e=1e7;navigator.geolocation.getCurrentPosition(this.showPosition,this.showError,{enableHighAccuracy:!0,timeout:e,maximumAge:0})}else alert("Geolocation is not supported by this browser")},showPosition:function(e){var t=e.coords.latitude,a=e.coords.longitude;$("input[name='nearby'][data-index='0']").val(t),$("input[name='nearby'][data-index='1']").val(a),$("input[name='nearby']").prop("checked",!0),$("input[name='sorting'][value='distance']").prop("checked",!0),$("input[name='sorting'][value='distance']").trigger("change")},showError:function(e){var t={1:"Geolocation prermission was denied.",2:"Position unavailable.",3:"Request timeout"};$("input[name='sort'][value='distance']").prop("checked",!1),$("input[name='sort'][value='distance']").prop("disabled",!0),$("input[name='sort'][value='distance']").parent().addClass("mute"),alert("Error: "+t[e.code])},showPriceFilter:function(){$(".filter_box#cost").show()},hidePriceFilter:function(){$(".filter_box#cost").hide()}},purplleVenue={};$(window).scroll(function(){$(window).scrollTop()>$("#searchResults").height()/2&&purplleListing.track_load<totalPages&&purplleListing.loading===!1&&purplleListing.track_load<=purplleListing.autoLoadPageCount&&purplleListing.nextCall()}),String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},$(function(){$("#slider-range").slider({range:!0,min:0,max:5e3,step:50,values:[0,1e5],stop:function(e,t){var a=t.values[1];if(5e3==a||1e5==a)var i="5000+";else if(""==a)var i="5000";else var i=a;$("#amount").html("&#x20b9; "+t.values[0]+" - &#x20b9; "+i),$("input[name='cost']").prop("checked",!0),$("input[name='cost'][data-index='0']").val(t.values[0]),5e3==t.values[1]&&(t.values[1]=1e5),$("input[name='cost'][data-index='1']").val(t.values[1]),$("input[name='cost'][data-index='0']").trigger("change")}});var e=$("#slider-range").slider("values",0),t=$("#slider-range").slider("values",1);if(5e3==t||1e5==t)var a="5000+";else if(""==t)var a="5000";else var a=t;$("#amount").html("&#x20b9; "+e+" - &#x20b9; "+a)});var dt=$("#empty_form").serialize();$(document).ready(function(){$(".shr-link-f").click(function(){_gaq.push(["_trackEvent","Share","facebook-share",document.URL])}),$(".shr-link-p").click(function(){_gaq.push(["_trackEvent","Share","pinterest-share",document.URL])}),$(".shr-link-t").click(function(){_gaq.push(["_trackEvent","Share","twitter-share",document.URL])}),$(".shr-link-g").click(function(){_gaq.push(["_trackEvent","Share","googleplus-share",document.URL])})});var banner_ids=[];$(document).ready(function(){$(".promo-bnr").each(function(){banner_ids.push($(this).data("banner_id"))}),banner_ids.length>0&&send_impression(banner_ids),$(".promo-bnr").on("click",function(){store_click($(this).data("banner_id"))})}),$("#myTab a").click(function(e){e.preventDefault(),$(this).tab("show")}),$(document).ready(function(){$('input[name="sort"][value="distance"]').on("change",function(){if($(this).is(":checked"))purplleListing.getLocation();
else{var e=$('input[name="sort"]:checked').length;0==e&&$(this).prop("checked",!0)}}),$("form#service_search_form").submit(function(e){""===$.trim($("input[name='q']").val())&&(e.preventDefault(),alert("You did not fill out search fields"))})}),jQuery.fn.putCursorAtEnd=function(){return this.each(function(){if(this.setSelectionRange){var e=2*$(this).val().length;this.setSelectionRange(e,e)}else $(this).val($(this).val())})},$(function(){$('[data-toggle="tooltip"]').tooltip()}),function(e){e.pgwModal=function(t){var a={},i={mainClassName:"pgwModal",backdropClassName:"pgwModalBackdrop",maxWidth:500,titleBar:!0,closable:!0,closeOnEscape:!0,closeOnBackgroundClick:!0,closeContent:'<span class="pm-icon"></span>',loadingContent:"Loading in progress...",errorContent:"An error has occured. Please try again in a few moments."};if("undefined"!=typeof window.pgwModalObject&&(a=window.pgwModalObject),"object"==typeof t&&!t.pushContent){if(!t.url&&!t.target&&!t.content)throw new Error('PgwModal - There is no content to display, please provide a config parameter : "url", "target" or "content"');a.config={},a.config=e.extend({},i,t),window.pgwModalObject=a}var n=function(){var t='<div id="pgwModalBackdrop"></div><div id="pgwModal"><div class="pm-container"><div class="pm-body"><span class="pm-close"></span><div class="pm-title"></div><div class="pm-content"></div></div></div></div>';return e("body").append(t),e(document).trigger("PgwModal::Create"),!0},l=function(){return e("#pgwModal .pm-title, #pgwModal .pm-content").html(""),e("#pgwModal .pm-close").html("").unbind("click"),!0},r=function(){return angular.element("body").injector().invoke(function(e){var t=angular.element($("#pgwModal .pm-content")).scope();e($("#pgwModal .pm-content"))(t),t.$digest()}),!0},o=function(t){return e("#pgwModal .pm-content").html(t),a.config.angular&&r(),s(),e(document).trigger("PgwModal::PushContent"),!0},s=function(){e("#pgwModal, #pgwModalBackdrop").show();var t=e(window).height(),a=e("#pgwModal .pm-body").height(),i=Math.round((t-a)/3);return 0>=i&&(i=0),e("#pgwModal .pm-body").css("margin-top",i),!0},d=function(){return a.config.modalData},c=function(){var t=e('<div style=""><div></div></div>').appendTo("body"),a=t.children();if("function"!=typeof a.innerWidth)return 0;var i=a.innerWidth()-a.height(90).innerWidth();return t.remove(),i},p=function(){return e("body").hasClass("pgwModalOpen")},u=function(){e("#pgwModal, #pgwModalBackdrop").removeClass().hide(),e("body").css("padding-right","").removeClass("pgwModalOpen"),l(),e(window).unbind("resize.PgwModal"),e(document).unbind("keyup.PgwModal"),e("#pgwModal").unbind("click.PgwModalBackdrop");try{delete window.pgwModalObject}catch(t){window.pgwModalObject=void 0}return e(document).trigger("PgwModal::Close"),!0},g=function(){if(0==e("#pgwModal").length?n():l(),e("#pgwModal").removeClass().addClass(a.config.mainClassName),e("#pgwModalBackdrop").removeClass().addClass(a.config.backdropClassName),a.config.closable?e("#pgwModal .pm-close").html(a.config.closeContent).click(function(){u()}).show():e("#pgwModal .pm-close").html("").unbind("click").hide(),a.config.titleBar?e("#pgwModal .pm-title").show():e("#pgwModal .pm-title").hide(),a.config.title&&e("#pgwModal .pm-title").text(a.config.title),a.config.maxWidth&&e("#pgwModal .pm-body").css("max-width",a.config.maxWidth),a.config.url){a.config.loadingContent&&e("#pgwModal .pm-content").html(a.config.loadingContent);var i={url:t.url,success:function(e){o(e)},error:function(){e("#pgwModal .pm-content").html(a.config.errorContent)}};a.config.ajaxOptions&&(i=e.extend({},i,a.config.ajaxOptions)),e.ajax(i)}else a.config.target?o(e(a.config.target).html()):a.config.content&&o(a.config.content);a.config.closeOnEscape&&a.config.closable&&e(document).bind("keyup.PgwModal",function(e){27==e.keyCode&&u()}),a.config.closeOnBackgroundClick&&a.config.closable&&e("#pgwModal").bind("click.PgwModalBackdrop",function(t){var a=e(t.target).hasClass("pm-container"),i=e(t.target).attr("id");(a||"pgwModal"==i)&&u()}),e("body").addClass("pgwModalOpen");var r=c();return r>0&&e("body").css("padding-right",r),e(window).bind("resize.PgwModal",function(){s()}),e(document).trigger("PgwModal::Open"),!0};return"string"==typeof t&&"close"==t?u():"string"==typeof t&&"reposition"==t?s():"string"==typeof t&&"getData"==t?d():"string"==typeof t&&"isOpen"==t?p():"object"==typeof t&&t.pushContent?o(t.pushContent):"object"==typeof t?g():void 0}}(window.Zepto||window.jQuery);