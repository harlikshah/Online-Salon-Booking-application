
function login(b){if(b=="login-page"){var a=$("#login-page").serialize()}else{var a=$("#login-form").serialize()}$.ajax({type:"POST",url:"/authentication/user/login",data:a,cache:false,success:function(c){if(c.status=="Success"){var d=getUrlVars()["next"];if(d){window.location.href=d}else{window.parent.location.reload()}}else{document.getElementById("login:email").value="";document.getElementById("login:password").value="";document.getElementById("login:email").focus();alert("Incorrect Email or Password")}}})}function getUrlVars(){var d=[],c;var a=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var b=0;b<a.length;b++){c=a[b].split("=");d.push(c[0]);d[c[0]]=c[1]}return d}function forgot_password(){$("#forgot-email").val();if(!validateEmail(document.getElementById("forgot-email").value)){alert("Incorrect Email Id");return false}var a=$("#forgot-email").val();var b=$("#empty_form").serialize()+"&email="+a;$.ajax({type:"POST",url:"/authentication/user/reset_password",data:b,success:function(c){$("#forgot-msg,#forgot-error").html(" ");if(c.status=="Success"){document.getElementById("forgot-msg").innerHTML=c.message}else{document.getElementById("forgot-error").innerHTML=c.message}}})}function validregister(){if(!validateEmail(document.getElementById("register:email").value)){alert("Incorrect Email Id");return false}if(empty("register:password")==false){alert("Password cannot be blank");return false}if(document.getElementById("register:password").value.length<5){alert("Password has to be minimum 5 charecters long");return false}if(empty("register:first_name")==false){alert("First name cannot be blank");return false}var a=$("#reg-popup-form").serialize();var b="login_popup";$.ajax({type:"POST",url:"/authentication/user/register",data:a+"&track_id="+b,cache:false,success:function(c){if(c.status=="Success"){window.location.href="/"}else{document.getElementById("reg-popup-form").reset();document.getElementById("register:email").focus();document.getElementById("valid-error").innerHTML=c.message}}})}function top_search(){$("#t-search").toggle()}function validateEmail(b){var a=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;return a.test(b)}function empty(a){if(document.getElementById(a).value==""){return false}return true}$(document).ready(function(){var a=$(".cd-user-modal"),m=a.find("#cd-login"),l=a.find("#cd-login"),c=a.find("#cd-reset-password"),d=$(".cd-switcher"),h=d.children("li").eq(0).children("a"),j=d.children("li").eq(1).children("a"),b=m.find(".cd-form-bottom-message a"),k=c.find(".cd-form-bottom-message a"),f=$(".main-nav");f.on("click",function(n){if($(n.target).is(f)){$(this).children("ul").toggleClass("is-visible")}else{f.children("ul").removeClass("is-visible");a.addClass("is-visible");($(n.target).is(".cd-signup"))?g():e()}});$("#login-form").submit(function(n){return false});$("#reg-popup-form").submit(function(n){return false});$(".cd-user-modal").on("click",function(n){if($(n.target).is(a)||$(n.target).is(".cd-close-form")){a.removeClass("is-visible")}});$(document).keyup(function(n){if(n.which=="27"){a.removeClass("is-visible")}});d.on("click",function(n){n.preventDefault();($(n.target).is(h))?e():g()});$(".hide-password").on("click",function(){var o=$(this),n=o.prev("input");("password"==n.attr("type"))?n.attr("type","text"):n.attr("type","password");("Hide"==o.text())?o.text("Show"):o.text("Hide");n.putCursorAtEnd()});b.on("click",function(n){n.preventDefault();i()});k.on("click",function(n){n.preventDefault();e()});function e(){l.removeClass("is-selected");m.addClass("is-selected");c.removeClass("is-selected");h.addClass("selected");j.removeClass("selected");$(".login-click").trigger("click")}function g(){m.removeClass("is-selected");l.addClass("is-selected");c.removeClass("is-selected");h.removeClass("selected");j.addClass("selected");$(".signup-click").trigger("click")}function i(){m.removeClass("is-selected");l.removeClass("is-selected");c.addClass("is-selected")}m.find('input[type="submit"]').on("click",function(n){n.preventDefault();m.find('input[type="email"]').toggleClass("has-error").next("span").toggleClass("is-visible")});l.find('input[type="submit"]').on("click",function(n){n.preventDefault();l.find('input[type="email"]').toggleClass("has-error").next("span").toggleClass("is-visible")})});function togglepop(){$(document).ready(function(){$(".cd-signin").trigger("click")})}function logout(){deletePageCookie();deleteFlagCookie();window.location="/logout"}(function(k,l,i,g){k.Purplle=k.Purplle||{};var p="Hey, check out Purplle.com! The largest brand in Personal Care & Grooming Products.  400+ Brands, Offers On 8000+ Products.";k.setLogoutCookie=function(r){var s=1000*60*60*24*7;var q=new Date(Date.now()+s);l.cookie="LOGGEDOUT="+r+"; expires="+q.toUTCString()};k.setPageCookie=function(s){var r=1000*60*60*24*7;var q=new Date(Date.now()+r);l.cookie="PTUID="+s+"; expires="+q.toUTCString()};k.setFlagCookie=function(s){var r=1000*60*60*24*7;var q=new Date(Date.now()+r);l.cookie="FLAG="+s+"; expires="+q.toUTCString()};k.getFlagCookie=function(){var r=l.cookie.indexOf("FLAG");if(r===-1){return null}r+=5;var q=l.cookie.indexOf(";",r);if(q===-1){q=l.cookie.length}return l.cookie.substring(r,q)};k.deleteFlagCookie=function(){l.cookie="FLAG=-1; expires=Thu, 01 Jan 1970 00:00:01 GMT;"};k.deletePageCookie=function(){l.cookie="PTUID=-1; expires=Thu, 01 Jan 1970 00:00:01 GMT;"};k.getLogoutCookie=function(){var r=l.cookie.indexOf("LOGGEDOUT");if(r===-1){return null}r+=10;var q=l.cookie.indexOf(";",r);if(q===-1){q=l.cookie.length}return l.cookie.substring(r,q)};k.getPageCookie=function(){var r=l.cookie.indexOf("PTUID");if(r===-1){return null}r+=6;var q=l.cookie.indexOf(";",r);if(q===-1){q=l.cookie.length}return l.cookie.substring(r,q)};k.purplleLogout=function(){setLogoutCookie(1);k.location.href="/logout"};var d={tw:null};var j=1,c=null,o=true,a=true,m=false,n=false;k.followFBFriends=function(){var r=0,q=10;k.fbFriendCall(q,r)};k.fbFriendCall=function(q,s,r){FB.api("/me/friends?fields=id,first_name,last_name,email,gender,birthday&limit="+q+"&offset="+s,function(t){if(t.data.length<=0){return false}var u=i("#empty_form").serialize()+"&data="+JSON.stringify(t.data)+"&tp_type=facebook";if(r){u+=u+"&override=1"}i.ajax({url:"/authentication/user/fb_friends/",type:"post",dataType:"json",data:u,success:function(v){if(v.status=="success"){s=s+q;k.fbFriendCall(q,s,true)}}})})};k.followGPFriends=function(){var r=0,q=10;k.gpFriendCall(q,r)};k.gpFriendCall=function(q,s,r){gapi.client.load("plus","v1",function(t){var u=gapi.client.plus.people.list({userId:"me",collection:"visible",maxResults:q,pageToken:!!c?c:g});u.execute(function(v){c=v.nextPageToken?v.nextPageToken:null;if(v.totalItems==0){return}var w=i("#empty_form").serialize()+"&data="+JSON.stringify(v.items)+"&tp_type=google-plus";if(r){w+=w+"&override=1"}i.ajax({url:"/authentication/user/gp_friends/",type:"post",dataType:"json",data:w,success:function(x){if(x.status=="success"){if(c){k.gpFriendCall(q,c,true)}}}})})})};k.fbAsyncInit=function(){FB.init({appId:facebookId,cookie:true,version:"v2.0"});FB.getLoginStatus(e)};var f=function(){FB.api("/me",function(q){var r=i.ajax({url:"/auth/invite/handlefb",type:"get",data:{id:q.id,email:q.email,track_id:"fb_signin",first_name:q.first_name,last_name:q.last_name,dob:q.birthday,location:(typeof q.location!=="undefined")?q.location.name.split(",")[0]:"",gender:q.gender},success:function(t){var u=getPageCookie();if(u!==t.trim()){setPageCookie(t);setFlagCookie(1);k.location.reload();return}var s=getFlagCookie();if(s){k.followFBFriends();deleteFlagCookie()}}})})};var h=function(){gapi.client.load("plus","v1",function(q){var r=gapi.client.plus.people.get({userId:"me"});r.execute(function(s){var t=i.ajax({url:"/auth/invite/handlegp",type:"get",data:{id:s.id,email:s.emails[0].value,track_id:"gp_signin",first_name:s.name.givenName,last_name:s.name.familyName,gender:s.gender,location:(typeof s.placesLived!=="undefined"&&typeof s.placesLived[0]!=="undefined"&&typeof s.placesLived[0].value!=="undefined")?s.placesLived[0].value.split(",")[0]:""},success:function(v){var w=getPageCookie();if(w!==v){setPageCookie(v)}if(n){setFlagCookie(1);k.location.reload();return}var u=getFlagCookie();if(u){k.followGPFriends();deleteFlagCookie()}}})})})};var e=function(r){var q=i(".fb-login-form"),s=i(".fb-invite-list");if(r.status==="connected"&&((getLogoutCookie()==="0"&&getPageCookie())||m)){q.css("display","none");s.css("display","block");m=false;f();if(Purplle.invites){getFBInvitations()}}else{q.css("display","block");s.css("display","none")}};k.handleFBlogin=function(){setLogoutCookie(0);m=true;FB.login(e,{scope:"public_profile, user_friends, user_location, email, user_birthday"})};k.handleGPLogin=function(q){if(q.status.signed_in&&((getLogoutCookie()==="0"&&getPageCookie())||n)){i(".gp-login-form").css("display","none");i(".gp-invite-list").css("display","block");h();if(Purplle.invites){getGPInvitations()}}else{i(".gp-login-form").css("display","block");i(".gp-invite-list").css("display","none")}};var b=function(){var q=function(u){if(l.getElementById(u)){return}var r=l.getElementsByTagName("script")[0];var t=l.createElement("script");t.id=u;t.async=true;t.src="//apis.google.com/js/client:plusone.js";r.parentNode.insertBefore(t,r)};q("google-plus-sdk")};b();i(function(){var q=k.location.hash;if(typeof(q)=="undefined"){q=q.slice(1);i("a[href='#"+q+"-invite']").tab("show")}i(".g-signin").click(function(r){setLogoutCookie(0);n=true});i(".tw-login-form").click(function(){setLogoutCookie(0)})})})(window,document,$);$(document).ready(function(){$(".signup-click").click(function(){$("#lsform").show();$(".signup-form").show();$(".login-form").hide();$("#wssup").hide()});$(".login-click").click(function(){$("#lsform").show();$(".login-form").show();$(".signup-form").hide();$("#wssup").hide()});$(".wssup-click").click(function(){$("#wssup").show();$("#lsform").hide()})});